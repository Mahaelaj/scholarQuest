webpackJsonp([3],{Q1Se:function(e,t,a){"use strict";function i(e){return g._46(0,[g._42(402653184,1,{gameController:0}),(e()(),g._23(1,0,null,null,0,"img",[["class","title"],["src","../../../assets/games/wordSmith/title.png"]],null,null,null,null,null)),(e()(),g._44(-1,null,["\n"])),(e()(),g._23(3,0,null,null,4,"sq-game",[["height","950px"],["type","vocab"]],null,[[null,"changeGradeLevelEvent"]],function(e,t,a){var i=!0,o=e.component;if("changeGradeLevelEvent"===t){i=!1!==o.changeGradeLevel(a)&&i}return i},c.b,c.a)),g._21(4,49152,[[1,4],["game",4]],0,u.a,[p.a,f.a,y.a,b.b],{type:[0,"type"],height:[1,"height"]},{changeGradeLevelEvent:"changeGradeLevelEvent"}),(e()(),g._44(-1,0,["\n    "])),(e()(),g._23(6,0,null,0,0,"div",[["class","game"],["id","phaser-game-parent"]],null,null,null,null,null)),(e()(),g._44(-1,0,["\n"])),(e()(),g._44(-1,null,["\n\n\n"]))],function(e,t){e(t,4,0,"vocab","950px")},null)}function o(e){return g._46(0,[(e()(),g._23(0,0,null,null,1,"ng-component",[],null,null,null,i,w)),g._21(1,4374528,null,0,d,[],null,null)],null,null)}Object.defineProperty(t,"__esModule",{value:!0});var s=a("xrDH"),n=(a.n(s),a("6nA8")),r=(a.n(n),this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(o,s){function n(e){try{h(i.next(e))}catch(e){s(e)}}function r(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){e.done?o(e.value):new a(function(t){t(e.value)}).then(n,r)}h((i=i.apply(e,t||[])).next())})}),h=this&&this.__generator||function(e,t){function a(e){return function(t){return i([e,t])}}function i(a){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,s&&(n=s[2&a[0]?"return":a[0]?"throw":"next"])&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[0,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return h.label++,{value:a[1],done:!1};case 5:h.label++,s=a[1],a=[0];continue;case 7:a=h.ops.pop(),h.trys.pop();continue;default:if(n=h.trys,!(n=n.length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){h=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){h.label=a[1];break}if(6===a[0]&&h.label<n[1]){h.label=n[1],n=a;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(a);break}n[2]&&h.ops.pop(),h.trys.pop();continue}a=t.call(e,h)}catch(e){a=[6,e],s=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var o,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},d=function(){function e(){this.dropContainers=[],this.curVocab=[],this.hilts=[],this.blades=[],this.score=0,this.level=0,this.lives=[],this.timeLeft=0,this.gameOverDialog=[],this.swordsLeft=4}return e.prototype.ngOnDestroy=function(){this.game.destroy()},e.prototype.ngAfterViewInit=function(){this.game=new n.Game(1355,750,n.AUTO,document.getElementById("phaser-game-parent"),{preload:this.preload,create:this.create.bind(this)})},e.prototype.preload=function(){this.game.load.spritesheet("loading_spritesheet","../../../assets/games/loading/loading_spritesheet.png",1355,761,8),this.game.load.spritesheet("loading_start","../../../assets/games/loading/start.png",1355,761,8)},e.prototype.create=function(){var e=this;this.game.stage.disableVisibilityChange=!0,this.background=this.game.add.image(0,0,"loading_spritesheet"),this.background.animations.add("load").play(4,!0),this.game.load.onLoadComplete.add(this.onAssetsLoaded,this),this.gameController.getVocabulary().subscribe(function(t){if(t.error&&console.log(t),t.error)return e.gameController.openErrorMessage();e.totVocab=t.vocab,e.loadAssets()},function(t){e.gameController.openErrorMessage()})},e.prototype.loadAssets=function(){return r(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this.game.load.image("hilt1","../../../assets/games/wordSmith/hilt1.png")];case 1:return e.sent(),[4,this.game.load.image("hilt2","../../../assets/games/wordSmith/hilt2.png")];case 2:return e.sent(),[4,this.game.load.image("hilt3","../../../assets/games/wordSmith/hilt3.png")];case 3:return e.sent(),[4,this.game.load.image("hilt4","../../../assets/games/wordSmith/hilt4.png")];case 4:return e.sent(),[4,this.game.load.image("hilt5","../../../assets/games/wordSmith/hilt5.png")];case 5:return e.sent(),[4,this.game.load.image("hilt1-gem","../../../assets/games/wordSmith/hilt1_gem.png")];case 6:return e.sent(),[4,this.game.load.image("hilt2-gem","../../../assets/games/wordSmith/hilt2_gem.png")];case 7:return e.sent(),[4,this.game.load.image("hilt3-gem","../../../assets/games/wordSmith/hilt3_gem.png")];case 8:return e.sent(),[4,this.game.load.image("hilt4-gem","../../../assets/games/wordSmith/hilt4_gem.png")];case 9:return e.sent(),[4,this.game.load.image("hilt5-gem","../../../assets/games/wordSmith/hilt5_gem.png")];case 10:return e.sent(),[4,this.game.load.image("blade","../../../assets/games/wordSmith/sword.png")];case 11:return e.sent(),[4,this.game.load.image("flame","../../../assets/games/wordSmith/flame.png")];case 12:return e.sent(),[4,this.game.load.image("smoke","../../../assets/games/wordSmith/smoke.jpg")];case 13:return e.sent(),[4,this.game.load.image("smoke-background","../../../assets/games/wordSmith/smokeBackground.png")];case 14:return e.sent(),[4,this.game.load.image("play-again-button","../../../assets/games/wordSmith/playAgainButton.png")];case 15:return e.sent(),[4,this.game.load.image("drop-border","../../../assets/games/wordSmith/dropBorder.png")];case 16:return e.sent(),[4,this.game.load.audio("hammer","../../../assets/games/wordSmith/audio/hammer.ogg")];case 17:return e.sent(),[4,this.game.load.audio("background_music","../../../assets/games/wordSmith/audio/background.ogg")];case 18:return e.sent(),[4,this.game.load.audio("shatter","../../../assets/games/wordSmith/audio/shatter.ogg")];case 19:return e.sent(),this.game.load.start(),[2]}})})},e.prototype.onAssetsLoaded=function(){var e=this.game.add.button(this.game.world.centerX,this.game.world.centerY,"loading_start",this.initGame,this);e.anchor.setTo(.5,.5),e.alpha=0,this.game.add.tween(e).to({alpha:1},2e3,"Linear",!0)},e.prototype.initGame=function(){this.background.destroy(),this.audio={background:this.game.add.audio("background_music"),hammer:this.game.add.audio("hammer"),shatter:this.game.add.audio("shatter")},this.setSmoke(),this.setFlames(),this.setScoreText(),this.setTimerText(),this.setLives(),this.startLevel(),this.startBackgroundMusic()},e.prototype.startBackgroundMusic=function(){this.backgroundMusic=this.audio.background,this.backgroundMusic.play(),this.backgroundMusic.volume=.5,this.backgroundMusic.loopFull(.5)},e.prototype.setSwords=function(){var e=s.sampleSize(["hilt1","hilt2","hilt3","hilt4","hilt5"],4);this.hilts=[];for(var t=s.sampleSize([9431514,16769150,16764879,11532091],e.length),a=this,i=1;i<=e.length;i++)!function(i){var o=a.game.add.image(a.game.width-35,i*a.game.height/5+20*(-2.5+i),e[i-1]),s=a.game.add.image(a.game.width-35,i*a.game.height/5+20*(-2.5+i),e[i-1]+"-gem");o.anchor.setTo(1,.5),s.anchor.setTo(1,.5),o.inputEnabled=!0,o.input.enableDrag(!0);var n={hilt:o,x:o.x,y:o.y,gem:s};o.events.onDragStop.add(function(){this.onDragStop(n)},a),o.events.onDragUpdate.add(function(){this.onDragUpdate(n)},a),a.hilts.push(n),o.tint=2171169,s.tint=t[i-1]}(i);this.blades=[];for(var i=1;i<=4;i++){var o=this.game.add.image(-70,i*this.game.height/5+20*(-2.5+i),"blade");o.anchor.setTo(.5,.5),o.scale.setTo(.8),o.tint=2171169,this.blades.push({blade:o})}},e.prototype.setScoreText=function(){var e={font:"26px Arial",fill:"#fff049",wordWrap:!0,wordWrapWidth:315,align:"center",stroke:"#ff943f",strokeThickness:3};this.scoreText=this.game.add.text(this.game.width-195,5,"Score: 0",e),this.scoreText.anchor.setTo(1,0)},e.prototype.setTimerText=function(){var e={font:"26px Arial",fill:"#fff049",wordWrap:!0,wordWrapWidth:315,align:"center",stroke:"#ff943f",strokeThickness:3};this.timerText=this.game.add.text(165,5,"Time: 0",e)},e.prototype.startTimer=function(){this.timeLeft=40-5*this.level,this.timeLeft<5&&(this.timeLeft=5),this.timerText.text="Time: "+this.timeLeft,this.timer&&this.timer.destroy(),this.timer=this.game.time.create(!1),this.timer.loop(1e3,this.decrementTimer,this),this.timer.start()},e.prototype.decrementTimer=function(){this.timeLeft--,this.timerText.text="Time: "+this.timeLeft,0==this.timeLeft&&this.loseGame()},e.prototype.loseGame=function(){this.hilts.forEach(function(e){return e.hilt.inputEnabled=!1});var e=this.game.add.image(this.game.world.centerX,this.game.world.centerY,"smoke-background");e.anchor.setTo(.5),e.scale.setTo(2.25);var t={font:"32px Arial",fill:"#fff049",wordWrap:!0,wordWrapWidth:315,align:"center",stroke:"#ff943f",strokeThickness:3},a=this.game.add.text(this.game.world.centerX,this.game.world.centerY-40,"Well Done\nYou Won\n"+this.score+" Coins",t);a.anchor.setTo(.5);var i=this.game.add.button(this.game.world.centerX,this.game.world.centerY+90,"play-again-button",this.resetGame,this);i.anchor.setTo(.5),i.width=200,i.height=75;var o=this.game.add.text(this.game.world.centerX,this.game.world.centerY+90,"Play Again",t);o.anchor.setTo(.5),this.timer.destroy(),this.gameOverDialog=[e,a,i,o],this.gameController.updateCoins(this.score)},e.prototype.resetGame=function(){this.gameOverDialog.forEach(function(e){return e.destroy()}),this.hilts.forEach(function(e){e.hilt.destroy(),e.text.destroy(),e.gem.destroy()}),this.blades.forEach(function(e){e.blade.destroy(),e.text.destroy()}),this.dropContainers.forEach(function(e){return e.destroy()}),this.lives.forEach(function(e){return e.destroy()}),this.level=0,this.score=0,this.scoreText.text="Score: 0",this.setLives(),this.startLevel()},e.prototype.setDropContainers=function(){this.dropContainers=[];for(var e=1;e<=4;e++){var t=this.game.add.image(this.game.world.centerX-105,e*this.game.height/5+20*(-2.5+e),"drop-border");t.anchor.setTo(.5,.5),t.scale.setTo(1.033),this.dropContainers.push(t),t.alpha=0,t.dropActive=!0,this.game.add.tween(t).to({alpha:1},1e3,"Linear",!0)}},e.prototype.setSmoke=function(){this.smokeGroup=this.game.add.group();var e=this.smokeGroup.create(0,-611,"smoke");e.scale.setTo(1.33),this.setNextSmoke(e)},e.prototype.setNextSmoke=function(e){var t=this.smokeGroup.create(0,this.game.world.height,"smoke");t.scale.setTo(1.33),this.game.add.tween(t).to({y:-611},176e3,"Linear",!0).onComplete.add(function(){this.setNextSmoke(t)},this),this.game.add.tween(e).to({y:-1600},128e3,"Linear",!0).onComplete.add(function(){e.destroy()})},e.prototype.setFlames=function(){for(var e=this,t=0;t<5;t++)!function(t){var a=e.game.add.image(300*t+125,550,"flame");a.anchor.setTo(.5,.5),a.angle=10,e.game.time.events.add(200*t,function(){this.moveFlameDown(a,550)},e)}(t);for(var a=this,t=0;t<5;t++)!function(e){var t=a.game.add.image(300*e,800,"flame");t.anchor.setTo(.5,.5),t.angle=-10,a.game.time.events.add(200*e,function(){this.moveFlameUp(t,700)},a)}(t)},e.prototype.onDragStop=function(e){for(var t=this,a=this,i=0;i<this.dropContainers.length;i++){var o=function(i){var o=a.dropContainers[i];if(o.dropActive&&a.game.input.x>o.x-.5*o.width&&a.game.input.x<o.x+.5*o.width&&a.game.input.y<o.y+.5*o.height&&a.game.input.y>o.y-.5*o.height){if(e.hilt.anchor.setTo(.5),e.gem.anchor.setTo(.5),e.hilt.x=o.x,e.hilt.y=o.y,e.text.x=o.x,e.text.y=o.y,e.gem.x=e.hilt.x,e.gem.y=e.hilt.y,s.find(a.curVocab,{word:e.text.text}).definition==a.blades[i].text.text){a.audio.hammer.play();var n=a.game.add.tween(e.hilt).to({x:540},2e3,"Linear",!0);a.game.add.tween(e.gem).to({x:540},2e3,"Linear",!0),a.game.add.tween(e.text).to({x:540},2e3,"Linear",!0),n.onComplete.add(function(){this.moveSwordLeft(e,this.blades[i])},a),a.game.add.tween(o).to({alpha:0},1e3,"Linear",!0),a.score+=5,a.scoreText.text="Score: "+a.score,o.dropActive=!1}else{e.hilt.tint=2171169,e.gem.tint=2171169,e.text.destroy();var r=a.game.add.tween(e.hilt).to({y:1e3},1e3,"Linear",!0);a.game.add.tween(e.gem).to({y:1e3},1e3,"Linear",!0),a.game.add.tween(e.gem).to({y:1e3},1e3,"Linear",!0),a.game.add.tween(e.hilt).to({angle:90},1e3,"Linear",!0);var h=s.find(a.curVocab,{word:e.text.text}).definition;a.blades.forEach(function(a,i){a.text.text==h&&(t.audio.shatter.play(),a.blade.tint=2171169,t.game.add.tween(a.blade).to({y:1e3},1e3,"Linear",!0),t.game.add.tween(a.blade).to({angle:-90},1e3,"Linear",!0),a.text.destroy(),t.game.add.tween(t.dropContainers[i]).to({alpha:0},1e3,"Linear",!0),t.loseLife(),r.onComplete.add(function(){t.destroySword(e,a)},t),t.dropContainers[i].dropActive=!1)})}return{value:void 0}}}(i);if("object"==typeof o)return o.value}e.hilt.x=e.x,e.hilt.y=e.y,e.text.x=this.game.width-270,e.text.y=e.y,e.gem.x=e.x,e.gem.y=e.y},e.prototype.destroySword=function(e,t){e.hilt.destroy(),e.text.destroy(),t.blade.destroy(),t.text.destroy(),e.gem.destroy(),0==--this.swordsLeft&&this.nextLevel()},e.prototype.nextLevel=function(){this.timer.destroy(),this.level++,this.startLevel()},e.prototype.loseLife=function(){this.lives.pop().destroy(),this.lives.length||this.loseGame()},e.prototype.moveSwordLeft=function(e,t){var a=this,i=this.game.add.tween(e.hilt).to({x:-200},2e3,"Linear",!0);this.game.add.tween(e.text).to({x:-200},2e3,"Linear",!0),this.game.add.tween(e.gem).to({x:-200},2e3,"Linear",!0),this.game.add.tween(t.blade).to({x:-796},2e3,"Linear",!0),this.game.add.tween(t.text).to({x:-795},2e3,"Linear",!0),i.onComplete.add(function(){a.destroySword(e,t)},this)},e.prototype.onDragUpdate=function(e){e.text.x=e.hilt.x-225,e.text.y=e.hilt.y,e.gem.x=e.hilt.x,e.gem.y=e.hilt.y},e.prototype.moveFlameUp=function(e,t){var a=this.game.add.tween(e).to({angle:10},4e3,"Linear",!0);this.game.add.tween(e).to({y:t-25},2e3,"Back.easeInOut",!0).onComplete.add(function(){this.game.add.tween(e).to({y:t},2e3,"Back.easeInOut",!0)},this),a.onComplete.add(function(){this.moveFlameDown(e,t)},this)},e.prototype.moveFlameDown=function(e,t){var a=this.game.add.tween(e).to({angle:-10},4e3,"Linear",!0);this.game.add.tween(e).to({y:t+25},2e3,"Back.easeInOut",!0).onComplete.add(function(){this.game.add.tween(e).to({y:t},2e3,"Back.easeInOut",!0)},this),a.onComplete.add(function(){this.moveFlameUp(e,t)},this)},e.prototype.setVocabulary=function(){this.curVocab=s.sampleSize(this.totVocab,4);var e=s.map(this.curVocab,function(e){return e.word});e=s.shuffle(e);var t=s.map(this.curVocab,function(e){return e.definition});t=s.shuffle(t);for(var a=1;a<=t.length;a++){var i={font:"20px Arial",fill:"#ffffff",wordWrap:!0,wordWrapWidth:315,align:"center",stroke:"#565656",strokeThickness:3},o=this.game.add.text(160,a*this.game.height/5+20*(-2.5+a),t[a-1],i);o.anchor.set(.5,.5),this.blades[a-1].text=o,o.tint=1579032}for(var a=1;a<=e.length;a++){var i={font:"20px Arial",fill:"#ffffff",wordWrap:!0,wordWrapWidth:315,align:"center",stroke:"#565656",strokeThickness:3},n=this.game.add.text(this.game.width-270,a*this.game.height/5+20*(-2.5+a),e[a-1],i);n.anchor.set(.5,.5),this.hilts[a-1].text=n,n.tint=1579032}},e.prototype.setLives=function(){var e=this.game.add.image(70,10,"flame");e.scale.setTo(.05);var t=this.game.add.image(85,10,"flame");t.scale.setTo(.05);var a=this.game.add.image(100,10,"flame");a.scale.setTo(.05),this.lives=[e,t,a]},e.prototype.startLevel=function(){var e=this;this.swordsLeft=4,this.setSwords(),this.setDropContainers(),this.setVocabulary(),this.hilts.forEach(function(t){e.fadeInImage(t.hilt,2171169),e.fadeInImage(t.text,1579032)}),this.blades.forEach(function(t){e.fadeInImage(t.blade,2171169),e.fadeInImage(t.text,1579032)}),this.startTimer()},e.prototype.fadeInImage=function(e,t){var a={step:0},i=this.game.add.tween(a).to({step:100},1e3,n.Easing.Linear.None);i.onUpdateCallback(function(){e.tint=n.Color.interpolateColor(t,16777215,100,a.step)}),i.start()},e.prototype.changeGradeLevel=function(e){this.totVocab=s.cloneDeep(e),this.resetGame()},e}(),l=function(){function e(){}return e}(),m=[".title[_ngcontent-%COMP%]{margin:auto;display:block;margin-bottom:30px;height:200px}.game[_ngcontent-%COMP%]{margin:auto;width:1354px}"],g=a("/oeL"),c=a("8YxG"),u=a("rdyP"),p=a("shAM"),f=a("kOp9"),y=a("VHzl"),b=a("LT5m"),v=[m],w=g._20({encapsulation:0,styles:v,data:{}}),x=g._18("ng-component",d,o,{},{},[]);a.d(t,"WordSmithModuleNgFactory",function(){return H});var _=a("/oeL"),k=a("kJcM"),L=a("8HKE"),T=a("U+Dl"),S=a("GZBr"),C=a("qbdv"),E=a("l6RC"),G=a("fc+i"),D=a("V8+5"),A=a("8Xfy"),W=a("zQfh"),I=a("4jwp"),V=a("OFGE"),O=a("w24y"),M=a("vgc3"),B=a("CPp0"),j=a("LT5m"),F=a("j5BN"),U=a("ghl+"),z=a("BkNc"),J=a("CZgk"),N=a("e0rv"),P=a("Ioj9"),X=a("4+t2"),Y=a("OmTc"),H=_._19(l,[],function(e){return _._34([_._35(512,_.m,_._15,[[8,[k.a,L.a,L.b,T.a,T.e,T.b,S.b,S.a,x]],[3,_.m],_.H]),_._35(4608,C.m,C.l,[_.D]),_._35(6144,E.b,null,[G.b]),_._35(4608,E.c,E.c,[[2,E.b]]),_._35(4608,D.a,D.a,[]),_._35(4608,A.j,A.j,[D.a]),_._35(4608,A.i,A.i,[A.j,D.a,_.J]),_._35(136192,A.e,A.c,[[3,A.e],D.a]),_._35(5120,A.n,A.m,[[3,A.n],[2,A.k],D.a]),_._35(5120,A.h,A.f,[[3,A.h],_.J,D.a]),_._35(5120,W.a,W.c,[]),_._35(4608,W.b,W.b,[W.a]),_._35(4608,W.l,W.l,[_.J,C.c]),_._35(5120,W.m,W.k,[[3,W.m],W.b,W.l]),_._35(5120,W.p,W.o,[[3,W.p],W.l,W.b]),_._35(5120,I.c,I.a,[[3,I.c],_.J,D.a]),_._35(5120,I.g,I.f,[[3,I.g],D.a,_.J,I.c]),_._35(4608,V.g,V.g,[I.c,I.g]),_._35(5120,V.d,V.j,[[3,V.d]]),_._35(4608,V.m,V.m,[I.g]),_._35(4608,V.b,V.b,[V.g,V.d,_.m,V.m,_.g,_.z,_.J]),_._35(5120,V.k,V.l,[V.b]),_._35(5120,O.b,O.c,[V.b]),_._35(4608,O.d,O.d,[V.b,_.z,[2,C.g],O.b,[3,O.d]]),_._35(5120,M.d,M.a,[[3,M.d],[2,B.e],G.c]),_._35(4608,j.b,j.b,[V.b,A.n,_.z,[3,j.b]]),_._35(512,C.b,C.b,[]),_._35(512,F.c,F.c,[]),_._35(512,E.a,E.a,[]),_._35(256,F.g,!0,[]),_._35(512,F.m,F.m,[[2,F.g]]),_._35(512,D.b,D.b,[]),_._35(512,F.y,F.y,[]),_._35(512,A.a,A.a,[]),_._35(512,U.d,U.d,[]),_._35(512,W.n,W.n,[]),_._35(512,W.f,W.f,[]),_._35(512,z.o,z.o,[[2,z.t],[2,z.l]]),_._35(512,J.f,J.f,[]),_._35(512,I.b,I.b,[]),_._35(512,V.e,V.e,[]),_._35(512,O.h,O.h,[]),_._35(512,N.g,N.g,[]),_._35(512,P.c,P.c,[]),_._35(512,F.o,F.o,[]),_._35(512,X.b,X.b,[]),_._35(512,M.c,M.c,[]),_._35(512,j.d,j.d,[]),_._35(512,Y.a,Y.a,[]),_._35(512,l,l,[]),_._35(1024,z.j,function(){return[[{path:"",component:d},{path:"word-smith",component:d}]]},[])])})}});